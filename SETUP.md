# 음식점/카페 마케팅 컨설팅 설문조사 시스템 설정 가이드

## 📋 시스템 개요

이 시스템은 지자체 마케팅 컨설팅을 위한 음식점/카페 현황 설문조사 웹 애플리케이션입니다.

### 주요 기능
- **📱 모바일 최적화** 다단계 설문조사 폼
- **📧 자동 이메일 발송** 설문 결과를 관리자에게 자동 전송
- **💾 데이터 저장** JSON 파일 형태로 로컬 저장 옵션
- **👨‍💼 관리자 페이지** 설문 결과 조회 및 관리

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
npm install
```

### 2. 환경변수 설정
프로젝트 루트에 `.env.local` 파일을 생성하고 다음 내용을 설정:

```env
# 이메일 발송 설정 (Gmail 사용 권장)
EMAIL_PROVIDER=gmail
EMAIL_USER=your-email@gmail.com
EMAIL_APP_PASSWORD=your-app-password

# 설문조사 결과를 받을 이메일 주소들 (쉼표로 구분)
RECIPIENT_EMAILS=admin@yourcompany.com,manager@yourcompany.com,consultant@yourcompany.com

# 선택사항: 설문 결과를 JSON 파일로도 저장할지 여부
SAVE_TO_FILE=true

# 개발환경 설정
NODE_ENV=development
```

### 3. Gmail 앱 비밀번호 설정 방법

#### Gmail 2단계 인증 설정
1. Google 계정 설정 → 보안으로 이동
2. "2단계 인증" 활성화

#### 앱 비밀번호 생성
1. Google 계정 설정 → 보안 → 앱 비밀번호
2. "메일" 선택하고 기기/앱 이름 입력
3. 생성된 16자리 비밀번호를 `EMAIL_APP_PASSWORD`에 입력

### 4. 개발 서버 실행
```bash
npm run dev
```

서버가 시작되면 http://localhost:3000 에서 설문조사에 접속할 수 있습니다.

## 📁 주요 파일 구조

```
survey-site/
├── src/app/
│   ├── page.tsx              # 메인 설문조사 페이지
│   ├── admin/page.tsx        # 관리자 페이지
│   └── api/
│       ├── survey/route.ts   # 설문 제출 API
│       └── admin/surveys/route.ts # 관리자 API
├── surveys/                  # 설문 결과 저장 폴더 (자동 생성)
├── .env.local               # 환경변수 설정 파일
└── SETUP.md                 # 이 파일
```

## 📊 설문조사 구성

### 1단계: 매장 기본정보
- 매장명, 업종, 상권 유형, 매장 규모
- 사장님 성함, 연락처, 이메일

### 2단계: 네이버 플레이스 마케팅 현황 (8개 항목)
- 사진 등재 상태
- 예약 기능 활용
- 매장 소식 주기
- 찾아오는 길 안내
- 무료 마케팅 메시지
- SEO 최적화
- 클립 영상
- 통계 분석

### 3단계: 인스타그램 마케팅 현황 (3개 항목)
- 검색 노출 콘텐츠
- 영상 개수
- 고객 후기

### 4단계: 블로그 마케팅 현황 (2개 항목)
- 최신 블로그 콘텐츠
- 상세 정보 제공

### 5단계: 구글 마케팅 현황 (1개 항목)
- 매장 정보 정확성

### 6단계: 유료 광고 현황 (3개 항목)
- 네이버 플레이스 상위노출 광고
- 네이버 파워링크
- 인스타그램 릴스 광고

## 👨‍💼 관리자 페이지

### 접속 방법
- URL: http://localhost:3000/admin
- 기본 비밀번호: `admin123` (보안을 위해 변경 권장)

### 기능
- **설문 결과 목록** 실시간 조회
- **상세 정보 보기** 개별 설문 결과 상세 확인
- **마케팅 점수** 자동 계산 및 표시
- **연락처 정보** 빠른 고객 연락을 위한 정보 제공

## 📧 이메일 발송 기능

### 자동 발송 내용
- **설문 제출 즉시** 관리자 이메일로 결과 전송
- **HTML 형식** 보기 좋은 포맷으로 정리
- **매장 정보 하이라이트** 중요 정보 강조
- **컨설팅 포인트** 개선 필요 사항 표시

### 이메일 설정 문제해결
1. **Gmail 인증 오류**
   - 2단계 인증 활성화 확인
   - 앱 비밀번호 재생성
   - 덜 안전한 앱 접근 허용 (권장하지 않음)

2. **SMTP 오류**
   - 네트워크 방화벽 확인
   - SMTP 서버 포트 확인 (587 또는 465)

## 💾 데이터 저장

### JSON 파일 저장
- `SAVE_TO_FILE=true` 설정 시 활성화
- `surveys/` 폴더에 자동 저장
- 파일명 형식: `survey_매장명_타임스탬프.json`

### 백업 권장사항
- 정기적으로 `surveys/` 폴더 백업
- 클라우드 스토리지 연동 고려
- 데이터베이스 연동 (향후 확장)

## 🔒 보안 고려사항

### 현재 구현
- 기본적인 비밀번호 인증
- 환경변수를 통한 설정 분리
- HTTPS 사용 권장 (프로덕션)

### 향후 개선 필요
- JWT 토큰 기반 인증
- 사용자 권한 관리
- 데이터 암호화
- API Rate Limiting

## 🌐 배포 가이드

### Vercel 배포 (권장)
```bash
npm install -g vercel
vercel
```

### 환경변수 설정
Vercel 대시보드에서 환경변수를 동일하게 설정

### 도메인 연결
- Vercel에서 커스텀 도메인 연결
- SSL 인증서 자동 적용

## 📞 지원 및 문의

### 기술 지원
- 설정 문제: 개발자에게 문의
- 기능 추가: 요구사항 상세 전달

### 커스터마이징
- 설문 항목 추가/수정
- 이메일 템플릿 변경
- UI/UX 개선

---

**📝 참고사항**
- 실제 운영 시 보안 강화 필수
- 정기적인 시스템 업데이트 권장
- 사용자 피드백 반영을 통한 지속적 개선
